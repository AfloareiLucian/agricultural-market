{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\coope\\\\Desktop\\\\Front-end\\\\olx-clone\\\\clone\\\\src\\\\Components\\\\LoginModal.jsx\";\nimport React from 'react'; // Import FirebaseAuth and firebase.\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport firebase from '../firebase/index.js';\nimport firebaseAuth from 'firebase/auth/dist/index.esm';\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\nimport Slider from './OLXSlider';\nimport { Button, Modal } from 'react-bootstrap';\nimport logo from \"../UI/piata-online.png\";\nimport { connect } from 'react-redux';\nimport { Link } from \"react-router-dom\";\nimport { set_data } from '../store/action/index';\nimport { ControlCamera } from '@material-ui/icons';\nimport '../Styling/LoginModal.css';\nimport { useHistory } from \"react-router-dom\";\nimport '../Styling/Header.css';\nimport '../Styling/Home.css';\nimport Header from \"./Header\";\nimport Categories from './Categories';\n\nclass Login extends React.Component {\n  constructor() {\n    super();\n\n    this.handleModal = () => {\n      this.setState({\n        show: true\n      });\n    };\n\n    this.closeModal = () => {\n      this.setState({\n        show: false\n      });\n    };\n\n    this.uiConfig = {\n      signInFlow: \"popup\",\n      signInOptions: [firebase.auth.GoogleAuthProvider.PROVIDER_ID, firebase.auth.FacebookAuthProvider.PROVIDER_ID, firebase.auth.EmailAuthProvider.PROVIDER_ID],\n      callbacks: {\n        signInSuccessWithAuthResult: () => false\n      }\n    };\n\n    this.move = () => {\n      alert(`Welcome ${firebase.auth().currentUser.emailVerified} Login Success`);\n      this.props.history.push('/');\n    };\n\n    this.componentWillUnmount = () => {\n      firebase.database().ref(`Users/`).push(this.state.user_data);\n    };\n\n    this.state = {\n      show: false,\n      isSignedIn: false,\n      user_data: {}\n    };\n  }\n\n  componentDidMount() {\n    var positiono = {};\n\n    if ('geolocation' in navigator) {\n      // console.log(\"Geolocation is Available\");\n      navigator.geolocation.getCurrentPosition(position => {\n        positiono = position; //  console.log(\"Latitude==>\",position.coords.latitude);\n        //  console.log(\"Longitude==>\",position.coords.longitude);\n      });\n    } else {\n      alert(\"Geolocation is not supported by this browser.\");\n    }\n\n    firebase.auth().onAuthStateChanged(user => {\n      this.setState({\n        isSignedIn: !!user\n      }); // console.log(\"user\", user)\n\n      if (this.state.isSignedIn === true) {\n        ////////////////////////////\n        let today = new Date();\n        let date = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate();\n        let time = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\n        let dateTime = date + ' ' + time;\n        dateTime = dateTime.toString(); //////////////////////////////\n\n        let userdata = {\n          name: firebase.auth().currentUser.displayName,\n          email: firebase.auth().currentUser.email,\n          photo: firebase.auth().currentUser.photoURL,\n          uid: firebase.auth().currentUser.uid,\n          isSignedIn: this.state.isSignedIn,\n          position: positiono,\n          LoginTime: dateTime\n        };\n        this.setState({\n          user_data: userdata\n        }); //   console.log(\"Simple User===>\",this.state.user_data);\n      } else {//   console.log(\"Sign In to continue\");\n        }\n    });\n  }\n\n  render() {\n    if (this.state.isSignedIn === true) {\n      this.props.set_data(this.state.user_data);\n    } //  console.log(\"redux data\",this.props.USER)\n\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: this.state.isSignedIn ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"fixed-top\",\n          style: {\n            marginTop: \"0px\",\n            width: \"100%\"\n          },\n          children: /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"structure\",\n          children: [/*#__PURE__*/_jsxDEV(Categories, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-success\",\n            style: {\n              textAlign: \"center\",\n              marginTop: \"5%\"\n            },\n            children: [\"Bine ati venit! \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-primary\",\n              children: firebase.auth().currentUser.displayName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 127\n            }, this), \" to Piata Online Agricola\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [\" \", /*#__PURE__*/_jsxDEV(\"img\", {\n              style: {\n                borderRadius: \"50%\"\n              },\n              width: \"70\",\n              height: \"70\",\n              alt: \"profile picture\",\n              src: firebase.auth().currentUser.photoURL\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 63\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            style: {\n              textAlign: \"center\",\n              marginTop: \"2%\"\n            },\n            className: \"text-info\",\n            children: \"Sunteti aici deoarece sunteti logat cu succes. Accesati pagina principala pentru a posta anunturi.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: \"center\",\n              marginTop: \"5%\"\n            },\n            children: [\" \", /*#__PURE__*/_jsxDEV(Link, {\n              className: \"btn btn-primary btn-outline-warning btn-lg\",\n              to: \"/\",\n              children: \"Acceseaza pagina principala\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 88\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          height: \"200px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-success\",\n          style: {\n            textAlign: \"center\",\n            marginTop: \"5%\"\n          },\n          children: \"Logati-va pentru a continua\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 34\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          id: \"logo\",\n          src: logo,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 34\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            width: \"100\",\n            height: \"100\",\n            src: \"https://timisuldecentru.ro/wp-content/uploads/piata-online.png\",\n            alt: \"This is OLX LOGO\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 63\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 34\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            fontFamily: \"serif\"\n          },\n          className: \"text-center\",\n          children: [\"By IndexError \", /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"https://github.com/\",\n            children: \"Github Profile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 105\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 34\n        }, this), /*#__PURE__*/_jsxDEV(StyledFirebaseAuth, {\n          uiConfig: this.uiConfig,\n          firebaseAuth: firebase.auth()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 29\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => ({//USER:state.app.USER,\n  //AUTH:state.auth.user_name\n}); //updating the data of the state\n\n\nconst mapDispatchToProp = dispatch => ({\n  set_data: data => dispatch(set_data(data))\n}); //updating the data of the state\n\n\nexport default connect(mapStateToProps, mapDispatchToProp)(Login);","map":{"version":3,"sources":["C:/Users/coope/Desktop/Front-end/olx-clone/clone/src/Components/LoginModal.jsx"],"names":["React","FontAwesomeIcon","firebase","firebaseAuth","StyledFirebaseAuth","Slider","Button","Modal","logo","connect","Link","set_data","ControlCamera","useHistory","Header","Categories","Login","Component","constructor","handleModal","setState","show","closeModal","uiConfig","signInFlow","signInOptions","auth","GoogleAuthProvider","PROVIDER_ID","FacebookAuthProvider","EmailAuthProvider","callbacks","signInSuccessWithAuthResult","move","alert","currentUser","emailVerified","props","history","push","componentWillUnmount","database","ref","state","user_data","isSignedIn","componentDidMount","positiono","navigator","geolocation","getCurrentPosition","position","onAuthStateChanged","user","today","Date","date","getFullYear","getMonth","getDate","time","getHours","getMinutes","getSeconds","dateTime","toString","userdata","name","displayName","email","photo","photoURL","uid","LoginTime","render","marginTop","width","textAlign","borderRadius","height","fontFamily","mapStateToProps","mapDispatchToProp","dispatch","data"],"mappings":"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","sourcesContent":["import React from 'react';\n// Import FirebaseAuth and firebase.\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\n\nimport firebase from '../firebase/index.js';\n\nimport firebaseAuth from 'firebase/auth/dist/index.esm'\n\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\n\nimport Slider from './OLXSlider'\n\nimport { Button, Modal } from 'react-bootstrap'\nimport logo from \"../UI/piata-online.png\";\nimport { connect } from 'react-redux'\nimport { Link } from \"react-router-dom\"\nimport { set_data } from '../store/action/index'\nimport { ControlCamera } from '@material-ui/icons';\nimport '../Styling/LoginModal.css'\nimport { useHistory } from \"react-router-dom\";\nimport '../Styling/Header.css'\nimport '../Styling/Home.css'\nimport Header from \"./Header\"\nimport Categories from './Categories'\n\nclass Login extends React.Component {\n    constructor() {\n        super()\n        this.state = {\n            show: false,\n            isSignedIn: false,\n            user_data: {}\n        }\n    }\n    handleModal = () => {\n        this.setState({\n            show: true\n        })\n    }\n    closeModal = () => {\n        this.setState({\n            show: false\n        })\n    }\n\n    uiConfig = {\n        signInFlow: \"popup\",\n        signInOptions: [\n            firebase.auth.GoogleAuthProvider.PROVIDER_ID,\n            firebase.auth.FacebookAuthProvider.PROVIDER_ID,\n            firebase.auth.EmailAuthProvider.PROVIDER_ID\n        ],\n        callbacks: {\n            signInSuccessWithAuthResult: () => false\n        }\n    }\n    componentDidMount() {\n\n        var positiono = {};\n        if ('geolocation' in navigator) {\n            // console.log(\"Geolocation is Available\");\n            navigator.geolocation.getCurrentPosition((position) => {\n                positiono = position\n                //  console.log(\"Latitude==>\",position.coords.latitude);\n                //  console.log(\"Longitude==>\",position.coords.longitude);\n            })\n        }\n        else {\n            alert(\"Geolocation is not supported by this browser.\");\n        }\n        firebase.auth().onAuthStateChanged(user => {\n            this.setState({ isSignedIn: !!user })\n            // console.log(\"user\", user)\n\n            if (this.state.isSignedIn === true) {\n                ////////////////////////////\n                let today = new Date();\n                let date = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate();\n                let time = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\n                let dateTime = date + ' ' + time;\n                dateTime = dateTime.toString();\n                //////////////////////////////\n\n                let userdata = {\n                    name: firebase.auth().currentUser.displayName,\n                    email: firebase.auth().currentUser.email,\n                    photo: firebase.auth().currentUser.photoURL,\n                    uid: firebase.auth().currentUser.uid,\n                    isSignedIn: this.state.isSignedIn,\n                    position: positiono,\n                    LoginTime: dateTime\n                }\n                this.setState({\n                    user_data: userdata\n                })\n                //   console.log(\"Simple User===>\",this.state.user_data);\n            }\n            else {\n                //   console.log(\"Sign In to continue\");\n            }\n        })\n\n    }\n    move = () => {\n        alert(`Welcome ${firebase.auth().currentUser.emailVerified} Login Success`)\n        this.props.history.push('/')\n    }\n\n    componentWillUnmount = () => {\n        firebase.database().ref(`Users/`).push(this.state.user_data);\n    }\n\n    render() {\n\n        if (this.state.isSignedIn === true) {\n            this.props.set_data(this.state.user_data);\n\n        }\n\n        //  console.log(\"redux data\",this.props.USER)\n        return (\n            <div>\n\n                {\n                    this.state.isSignedIn ? (\n\n                        <div>\n\n                            <div className=\"fixed-top\" style={{ marginTop: \"0px\", width: \"100%\" }}>\n                                <Header />\n                            </div>\n                            <div id=\"structure\">\n                                <Categories />\n                                <hr />\n                                <h1 className=\"text-success\" style={{ textAlign: \"center\", marginTop: \"5%\" }}>Bine ati venit! <span className=\"text-primary\">{firebase.auth().currentUser.displayName}</span> to Piata Online Agricola</h1>\n                                <div className='text-center'> <img style={{ borderRadius: \"50%\" }} width=\"70\" height=\"70\"\n                                    alt=\"profile picture\"\n                                    src={firebase.auth().currentUser.photoURL}\n                                /></div>\n                                <h4 style={{ textAlign: \"center\", marginTop: \"2%\" }} className=\"text-info\">Sunteti aici deoarece sunteti logat cu succes. Accesati pagina principala pentru a posta anunturi.</h4>\n                                <div style={{ textAlign: \"center\", marginTop: \"5%\" }}> <Link className=\"btn btn-primary btn-outline-warning btn-lg\" to=\"/\">Acceseaza pagina principala</Link> </div>\n                            </div>\n\n\n\n\n\n\n                        </div>\n\n                    ) : (\n                            <div style={{ height: \"200px\" }}>\n                                 <h1 className=\"text-success\" style={{ textAlign: \"center\", marginTop: \"5%\" }}>Logati-va pentru a continua</h1>\n                                 <img id=\"logo\" src={logo} alt=\"\" />\n                                 <div className=\"text-center\"><img width=\"100\" height=\"100\" src=\"https://timisuldecentru.ro/wp-content/uploads/piata-online.png\" alt=\"This is OLX LOGO\"/></div>\n                                 <h1 style={{fontFamily:\"serif\"}} className=\"text-center\">By IndexError <a href=\"https://github.com/\">Github Profile</a></h1> \n                                <StyledFirebaseAuth\n                                    uiConfig={this.uiConfig}\n                                    firebaseAuth={firebase.auth()}\n                                />\n                            </div>\n                        )\n                }\n\n            </div>\n        );\n    }\n}\n\n\nconst mapStateToProps = (state) => ({\n    //USER:state.app.USER,\n    //AUTH:state.auth.user_name\n})\n\n//updating the data of the state\nconst mapDispatchToProp = (dispatch) => ({\n    set_data: (data) => dispatch(set_data(data))\n})\n//updating the data of the state\nexport default connect(mapStateToProps, mapDispatchToProp)(Login);\n"]},"metadata":{},"sourceType":"module"}